<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roovix Shop - Make mony online</title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://roovix.com/images/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://roovix.com/images/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://roovix.com/images/logo.png">    
    
    <!-- Meta Description: Focus on the purpose of the page -->
    <meta name="description" content="Roovix Shop - Your trusted e-commerce platform in Bangladesh for top-quality products. Discover a wide range of electronics, fashion, home goods, and more. A marketplace for everyone, where buying and selling is simple and reliable.">

    <!-- Meta Keywords: Relevant to the login and user account -->
    <meta name="keywords" content="Roovix Shop, e-commerce Bangladesh, online shopping BD, product selling BD, electronics, fashion, home goods, online marketplace, trusted shop Bangladesh, buy and sell online, best e-commerce BD">

    <!-- Author: Your brand or company name -->
    <meta name="author" content="Roovix">

    <!-- Open Graph Meta Tags for better sharing on social media -->
    <meta property="og:title" content="Login - Roovix Shop">
    <meta property="og:description" content="Access your Roovix Shop account to manage your orders and enjoy exclusive offers. Log in now for the best e-commerce experience in Bangladesh.">
    <meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/ec-affiliate.appspot.com/o/e%20-%20commerce%20logo%20circle.png?alt=media&token=f4fc5b89-acb2-48a2-924e-e4ae6c6886ee">
    <meta property="og:url" content="https://roovix.com/login">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">

    <!-- Assets -->
    <script src="/config.js"></script>
    <link rel="stylesheet" href="/styles/product_details.css">
    <link rel="stylesheet" href="/styles/course.css">

    <!-- Font awesome -->
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    />

</head>
<body>
    <!-- Nav ber start here -->
    <nav id="nav_ber">
        <div class="title" id="open_home">
          <a href="https://roovix.com" style="text-decoration: none; color: #000; display: flex; align-items: center;">
            <img src="https://roovix.com/images/logo.png" alt="roovix_shop">
            <p>Roovix Shop</p>
          </a>
        </div>
        <button id="nav_toggle"><i class="fa-solid fa-bars-staggered"></i></button>
        <button id="nav_close"><i class="fa-solid fa-xmark"></i></button>
        <ul id="nav_list">
          <li><a href="https://roovix.com"><i class="fa-solid fa-house"></i> Home</a></li>
          <li id="dashbiard_item"><a href="https://roovix.com/dashboard"><i class="fa-solid fa-chart-line"></i> Dashboard</a></li>
          <li><a href="/search_result.html?search=all"><i class="fa-solid fa-magnifying-glass"></i> Search</a></li>
        </ul>
      </nav>
      <!-- Nav ber end here -->

      <section id="course">
        <div class="intro_container">
          <!-- Drop down start -->
          <div class="dropdown">

            <!-- Dropdown Item 1 (default open) -->
            <div class="dropdown-item active">
              <div class="dropdown-header">Make money online 'Marketing' <i class="fa-solid fa-chevron-down"></i></div>
              <div class="dropdown-description">
                  <h2>Unlock the Potential of Online Earnings! 'Network Marketing'</h2>
                  <p>Discover the path to earning online! Our platform offers comprehensive courses to guide you in building a sustainable income from home. Whether you're starting fresh or aiming to expand, our resources provide everything you need to succeed in the digital world.
                    <br><br>Begin your journey to financial freedom today!</p>
                  <div style="position: relative; border-radius: 10px; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000;">
                    <iframe 
                        src="https://www.youtube.com/embed/VeA9OyVEH4A" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                        title="YouTube Video"
                    ></iframe>
                </div>          
                  <button class="unroll_course" id="unroll_course2">Enroll course</button>
              </div>
            </div>

             <!-- Dropdown Item 2 -->
            <div class="dropdown-item">
              <div class="dropdown-header">Python course <i class="fa-solid fa-chevron-down"></i></div>
              <div class="dropdown-description">
                  <h2>Unlock the Secrets of Python Programming!</h2>
                  <p>Dive into our captivating 4-week online course designed to unravel the mysteries of Python! Discover the power of coding as you explore data types, control flow, functions, and more. With hands-on projects and a vibrant community for support, you’ll transform your skills and unlock new career possibilities.
                    <br><br>Join us and start your adventure in Python programming today!
                  </p>
                  <div style="position: relative; border-radius: 10px; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000;">
                    <iframe 
                        src="https://www.youtube.com/embed/DPI0DenM45I" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                        title="YouTube Video"
                    ></iframe>
                </div>
                <button class="unroll_course" id="unroll_course1">Enroll course</button>
              </div>
          </div>
        
            <!-- Dropdown Item 3 -->
            <div class="dropdown-item">
                <div class="dropdown-header">Web development course <i class="fa-solid fa-chevron-down"></i></div>
                <div class="dropdown-description">
                    <h2>Unleash the Magic of Web Development!</h2>
                    <p>Embark on an exciting 6-week journey into the world of web development! This online course will guide you through the enchanting process of building dynamic websites, from HTML and CSS to JavaScript and beyond. With hands-on projects and a supportive community, you'll gain the skills to create captivating web experiences.
                      <br><br>Join us to uncover the secrets of web development and transform your ideas into reality!
                    </p>
                    <div style="position: relative; border-radius: 10px; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000;">
                      <iframe 
                          src="https://www.youtube.com/embed/DPI0DenM45I" 
                          frameborder="0" 
                          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                          allowfullscreen
                          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                          title="YouTube Video"
                      ></iframe>
                  </div>
                  <button class="unroll_course" id="unroll_course3">Enroll course</button>
                </div>
            </div>
        </div>        
      </div>
    <!-- Drop down end -->
      </section>

      <!-- Form container start -->
      <div class="form_container">
        <div class="form_title">
          <img  src="https://roovix.com/images/logo.png" alt="">
          <h2>Enroll Your Course</h2>
        </div>
        <form id="unroll_form">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required>

            <label for="address">Address</label>
            <input type="text" id="address" name="address" required>

            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" placeholder="Without (+88)" required>

            <select name="select_course" id="select_course" required>
                <option value="" selected disabled>Select course type</option>
                <option value="python">Python</option>
                <option value="web_dev">Web Development</option>
                <option value="roovix_shop">Marketing</option>
            </select>

            <label for="email">Email (Optional)</label>
            <input type="email" id="email" name="email">

            <label for="promo">Promo code (Optional)</label>
            <input type="text" id="promo" name="promo">

            <select name="payment" id="payment" required>
                <option value="" selected disabled>Select payment method</option>
                <option value="bkash">Bkash</option>
            </select>

            <div class="bkash_payment_reference">
              <h3>Reference</h3>
              <ul>
                <li>Bkash number: <span id="owner_bkash_number">+880-1733914782</span></li>
                <li>Course fee: <span id="course_fee">৳0</span></li>
              </ul>
              <p>To enroll in the course, please pay the course fee to the above Bkash number. Use this reference number during your payment for verification.</p>
            </div>            

            <div id="place_payment_container">
              <label for="payed_amount">Payed amount</label>
              <input type="number" id="payed_amount" name="payed_amount" required>
  
              <label for="payed_number">Payed phone number</label>
              <input type="tel" id="payed_number" name="payed_number" placeholder="Without (+88)" required>
  
              <label for="transaction">Transaction Id</label>
              <input type="text" id="transaction" name="transaction" required>
            </div>

            <input id="button" type="submit" value="Unroll"/>
        </form>
      </div>
      <!-- Form container end -->
      </section>

    <!-- Scripts -->
    <script>
        // toggle navigation
        document.getElementById("nav_toggle").addEventListener("click", function(){
          document.getElementById("nav_close").style.display = "block";
          document.getElementById("nav_toggle").style.display = "none";
          document.getElementById("nav_list").style.display = "flex";
        });
        document.getElementById("nav_close").addEventListener("click", function(){
          document.getElementById("nav_close").style.display = "none";
          document.getElementById("nav_toggle").style.display = "block";
          document.getElementById("nav_list").style.display = "none";
        });

        // JavaScript to toggle one description at a time
        const items = document.querySelectorAll('.dropdown-item');

        items.forEach(item => {
            item.querySelector('.dropdown-header').addEventListener('click', () => {
                // Close all descriptions
                items.forEach(i => i.classList.remove('active'));
                
                // Open the clicked description
                item.classList.toggle('active');
            });
        });

        // Show hide bkash payment reference when bkash option selected
        // Get the select element and the reference div
        const paymentSelect = document.getElementById("payment");
        const bkashReference = document.querySelector(".bkash_payment_reference");

        // Listen for changes on the select element
        paymentSelect.addEventListener("change", function() {
          // Show the reference if "bkash" is selected, otherwise hide it
          if (paymentSelect.value === "bkash") {
            bkashReference.style.display = "block";
          } else {
            bkashReference.style.display = "none";
          }

          // Show the place_payment_container 
          document.getElementById("place_payment_container").style.display = "flex";

          const select_course_for_show = document.getElementById("select_course");
          const course_fee = document.getElementById("course_fee");
          if(select_course_for_show.value === "python") {
            course_fee.textContent = `৳ ${Number(3000).toLocaleString()}`;
          }else if(select_course_for_show.value === "web_dev") {
            course_fee.textContent = `৳ ${Number(5000).toLocaleString()}`;
          }else if(select_course_for_show.value === "roovix_shop"){
            course_fee.textContent = `৳ ${Number(500).toLocaleString()}`;
          }else if(select_course_for_show.value === "fee"){
            course_fee.textContent = `৳ ${Number(300).toLocaleString()}`;
          }else{
            course_fee.textContent = "At first select course type?"
          }
        });

        // unroll_course1 click
        const unroll_course0 = document.getElementById("unroll_course0");
        const unroll_course1 = document.getElementById("unroll_course1");
        const unroll_course2 = document.getElementById("unroll_course2");
        const unroll_course3 = document.getElementById("unroll_course3");
        unroll_course1.addEventListener("click", function(){
          formContainer();
        });
        unroll_course2.addEventListener("click", function(){
          formContainer();
        });
        unroll_course3.addEventListener("click", function(){
          formContainer();
        });
        unroll_course0.addEventListener("click", function(){
          formContainer();
        });
        function formContainer(){
          document.querySelector(".form_container").style.display = "flex";
          // Access the object by ID and scroll to it
          const view_form_obj = document.getElementById("unroll_form");
          view_form_obj.scrollIntoView({ behavior: "smooth", block: "center" });
        }
    </script>

<!-- Form control -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
  import {
    getDatabase,
    ref,
    onValue,
    set,
    push
  } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
  import {
    getAuth,
    onAuthStateChanged,
    GoogleAuthProvider,
    signOut
  } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const auth = getAuth(app);

  // Firebase Auth listener (moved outside form submit event)
  onAuthStateChanged(auth, user => {
    if (user) {
      console.log("User is signed in:", user.email);

      document.getElementById("unroll_form").addEventListener("submit", (event) => {
        event.preventDefault(); // Prevent form reload

        // Reference to user’s course in the database
        const userCourseRef = push(ref(db, `users/${user.uid}/courses`));
        const newUserCourseRef = ref(db, `users/${user.uid}/courses/${userCourseRef.key}`);

        // Form values
        const name = document.getElementById("name")?.value ?? "";
        const address = document.getElementById("address")?.value ?? "";
        const phone = document.getElementById("phone")?.value ?? "";
        const select_course = document.getElementById("select_course")?.value ?? "";
        const email = document.getElementById("email")?.value ?? "";
        const promo = document.getElementById("promo")?.value ?? "";
        const payment = document.getElementById("payment")?.value ?? "";
        const payed_amount = parseFloat(document.getElementById("payed_amount")?.value) || 0;
        const payed_number = parseFloat(document.getElementById("payed_number")?.value) || 0;
        const transaction = document.getElementById("transaction")?.value ?? "";

        // Data to add
        const data_to_add = {
          name: name,
          address: address,
          phone: phone,
          select_course: select_course,
          email: email,
          promo: promo,
          payment_method: payment,
          payed_amount: payed_amount,
          payed_number: payed_number,
          transaction: transaction,
          status: "pending"
        };

        // Save data to Firebase
        set(newUserCourseRef, data_to_add)
          .then(() => {
            alert("Application submitted successfully.");
            location.reload();
          })
          .catch((err) => {
            console.error("Error saving application data:", err);
            alert("Failed to apply. Please try again later.");
          });
      });
    } else {
      // Redirect to login if user is not logged in
      window.location.href = "https://roovix.com/login";
    }
  });
</script>
</body>
</html>
