<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://shop.roovix.com/images/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://shop.roovix.com/images/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://shop.roovix.com/images/logo.png">

    <!-- Link to assets -->
    <script src="config.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Meta Description: Describe the login for both the main company and sub-brand -->
    <meta
      name="description"
      content="Register new Roovix account - Access your account for all Roovix platforms, including Roovix Shop. Manage orders, track shipments, and enjoy exclusive deals from our trusted e-commerce platform in Bangladesh."
    />

    <!-- Meta Keywords: Keywords relevant to the login page under the main brand -->
    <meta
      name="keywords"
      content="Roovix register, Roovix Shop register, user account, register page, e-commerce Bangladesh, online shopping BD, access Roovix account, manage orders, track shipments, secure register, Roovix platform"
    />

    <!-- Author: Your main company name -->
    <meta name="author" content="Roovix" />

    <!-- Open Graph Meta Tags for better sharing on social media -->
    <meta property="og:title" content="Login - Roovix" />
    <meta
      property="og:description"
      content="Log in to access your Roovix account, including Roovix Shop. Manage your orders and explore exclusive offers on our trusted platforms in Bangladesh."
    />
    <meta
      property="og:image"
      content="https://firebasestorage.googleapis.com/v0/b/ec-affiliate.appspot.com/o/e%20-%20commerce%20logo%20circle.png?alt=media&token=f4fc5b89-acb2-48a2-924e-e4ae6c6886ee"
    />
    <meta property="og:url" content="https://shop.roovix.com/login" />
    <meta property="og:type" content="website" />
    <title>Login Roovix</title>
  </head>
  <body>

        <!-- Success popup start -->
        <div id="success_popup" class="fixed hidden z-10 inset-0 overflow-y-auto">
          <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
              <div class="fixed inset-0 transition-opacity">
                  <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
              </div>
              <span class="hidden sm:inline-block sm:align-middle sm:h-screen"></span>
              <div
                  class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                  <div class="sm:flex sm:items-start">
                      <div
                          class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                          <svg class="h-6 w-6 text-green-600" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                          </svg>
                      </div>
                      <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                          <h3 id="success_title" class="text-lg leading-6 font-medium text-gray-900">
                              
                          </h3>
                          <div class="mt-2">
                              <p id="success_message" class="text-sm leading-5 text-gray-500">
                                  
                              </p>
                          </div>
                      </div>
                  </div>
                  <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                      <span class="flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto">
                          <button onclick="closeSuccessPopup()" type="button"
                              class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                              OK
                          </button>
                      </span>
                  </div>
              </div>
          </div>
      </div>
        <!-- Success popup end -->

    
    <!-- Alert Body start -->
    <div id="alert" class="fixed hidden z-50 inset-0 overflow-y-auto">
      <div class="flex items-center justify-center min-h-screen px-4 sm:px-0 text-center">
        
        <!-- Overlay Background -->
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
          <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>

        <!-- Modal Content -->
        <div class="bg-white rounded-lg shadow-xl overflow-hidden transform transition-all w-full max-w-md sm:w-3/4 sm:max-w-lg sm:my-8">
          <!-- Close Button -->
          <div class="absolute top-0 right-0 pt-4 pr-4">
            <button type="button" onclick="closeAlert()" class="text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          <!-- Icon and Message -->
          <div class="p-6">
            <div class="flex flex-col sm:flex-row items-center">
              <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10">
                <svg class="h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
              </div>
              <div class="mt-4 sm:mt-0 sm:ml-4 text-center sm:text-left">
                <h3 id="alert_title" class="text-lg font-medium text-gray-900">
                  Your Confirmation Message
                </h3>
                <p id="alert_description" class="mt-2 text-sm text-gray-500">
                  Your body text goes here.
                </p>
              </div>
            </div>
            
            <!-- Buttons -->
            <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
              <button id="alert_confirm_btn" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto">
                Confirm
              </button>
              <button onclick="closeAlert()" id="alert_cancel_btn" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Alert Body end -->


    <div class="min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8">
      <div class="sm:mx-auto sm:w-full sm:max-w-md">
          <img class="mx-auto w-[70px]" src="images/logo.png" alt="Workflow">
          <h2 class="mt-6 text-center text-3xl leading-9 text-gray-900">
              Create a new account
          </h2>
          <p class="mt-2 text-center text-sm leading-5 text-gray-500 max-w">
              Or
              <a href="/login"
                  class="font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline transition ease-in-out duration-150">
                  login to your account
              </a>
          </p>
      </div>
  
      <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
          <div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10">
              <form method="POST" action="#">
                  <div>
                      <label for="email" class="block text-sm font-medium leading-5  text-gray-700">Name</label>
                      <div class="mt-1 relative rounded-md shadow-sm">
                          <input id="name" name="name" placeholder="Enter your full name" type="text" required=""
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                          <div class="hidden absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                              <svg class="h-5 w-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                  <path fill-rule="evenodd"
                                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                      clip-rule="evenodd">
                                  </path>
                              </svg>
                          </div>
                      </div>
                  </div>

                  <div class="mt-6">
                      <label for="email" class="block text-sm font-medium leading-5  text-gray-700">Phone</label>
                      <div class="mt-1 relative rounded-md shadow-sm">
                          <input id="phone" name="phone" placeholder="Phone number" type="number" required=""
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                          <div class="hidden absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                              <svg class="h-5 w-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                  <path fill-rule="evenodd"
                                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                      clip-rule="evenodd">
                                  </path>
                              </svg>
                          </div>
                      </div>
                  </div>

                  <div class="mt-6">
                      <label for="email" class="block text-sm font-medium leading-5  text-gray-700">Referral uid (Optional)</label>
                      <div class="mt-1 relative rounded-md shadow-sm">
                          <input id="referral" name="referral" placeholder="Referral uid" type="text"
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                          <div class="hidden absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                              <svg class="h-5 w-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                  <path fill-rule="evenodd"
                                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                      clip-rule="evenodd">
                                  </path>
                              </svg>
                          </div>
                      </div>
                  </div>

                  <div class="mt-6">
                      <label for="email" class="block text-sm font-medium leading-5 text-gray-700">
                          Email address
                      </label>
                      <div class="mt-1 relative rounded-md shadow-sm">
                          <input id="email" name="email" placeholder="user@example.com" type="email"
                              required=""
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                          <div class="hidden absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                              <svg class="h-5 w-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                  <path fill-rule="evenodd"
                                      d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                      clip-rule="evenodd"></path>
                              </svg>
                          </div>
                      </div>
                  </div>
  
                  <div class="mt-6">
                      <label for="password" class="block text-sm font-medium leading-5 text-gray-700">
                          Password
                      </label>
                      <div class="mt-1 rounded-md shadow-sm">
                          <input id="password" name="password" type="password" required=""
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                      </div>
                  </div>
  
                  <div class="mt-6">
                      <label for="password_confirmation" class="block text-sm font-medium leading-5 text-gray-700">
                          Confirm Password
                      </label>
                      <div class="mt-1 rounded-md shadow-sm">
                          <input id="password_confirmation" name="password_confirmation" type="password" required=""
                              class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5">
                      </div>
                  </div>
  
                  <div class="mt-6">
                      <span class="block w-full rounded-md shadow-sm">
                          <button type="submit"
                              class="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out">
                              Create account
                          </button>
                      </span>
                  </div>
              </form>
  
          </div>
      </div>
  </div>

    <!-- Script for login to Roovix -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
      import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
      import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";
    
      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const auth = getAuth(app);

      document.addEventListener("DOMContentLoaded", () => {
        // Get the form element
        const form = document.querySelector("form");

        // Handle form submission
        form.addEventListener("submit", (event) => {
          event.preventDefault();  // Prevent the default form submission behavior

          // Capture the values of the form fields by their IDs
          const name = document.getElementById("name").value;
          const phone = document.getElementById("phone").value;
          const referral = document.getElementById("referral").value;
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          const confirmPassword = document.getElementById("password_confirmation").value;

          if(password != confirmPassword){
            let alertTitle = document.getElementById("alert_title");
              let alertBody = document.getElementById("alert");
              let alertDescription = document.getElementById("alert_description");
              alertTitle.innerText = "Error!";
              alertDescription.innerText = "Confirm password doesn't match to the password";

              document.getElementById("alert_confirm_btn").textContent = "Try Again";
              document.getElementById("alert_cancel_btn").classList.add("hidden");
              let alertConfirmBtn = document.getElementById("alert_confirm_btn");

              alertConfirmBtn.addEventListener("click", ()=>{
                // Hide the alert
                alertBody.classList.add('hidden');
              });
              // Show the alert
              alertBody.classList.remove('hidden');
            return;
          } 

          // Register user with uid
          createUserWithEmailAndPassword(auth, email, password).then((userCredential) => {
            // User created, now save data
            const user = userCredential.user;
            const userRef = ref(db, `users/${user.uid}`);
            const userData = {
              name: name,
              phone_number: phone,
              referral: referral,
              email: email,
              created_at: new Date().toISOString(),
              updated_at: new Date().toISOString(),
              balance: 0,
              total_link_click: 0,
              total_orders: 0,
              type: "Normal User",
              uid: user.uid,
              profile_picture: "https://shop.roovix.com/images/difault_user_logo.png"
            };
            set(userRef, userData).then(() => {
              let success_profile_update_popup = document.getElementById("success_popup");
              document.getElementById("success_title").textContent = "Successful";
              document.getElementById("success_message").textContent = "You have successfully created your profile!";
              success_profile_update_popup.classList.remove('hidden');
            }).catch((err) => {
              handleError(err, "Profile data could not be saved.");
            });
          }).catch((err) => {
            handleError(err, "User creation failed.");
          });

        function handleError(err, customMessage) {
          let alertTitle = document.getElementById("alert_title");
          let alertBody = document.getElementById("alert");
          let alertDescription = document.getElementById("alert_description");
          alertTitle.innerText = "Error!";
          alertDescription.innerText = customMessage + " " + err.message;

          let alertConfirmBtn = document.getElementById("alert_confirm_btn");

          alertConfirmBtn.addEventListener("click", () => {
            alertBody.classList.add('hidden');
            window.location.href = "https://shop.roovix.com";
          });

          alertBody.classList.remove('hidden');
        }
        });
      });
    </script>    
    <!-- Function script start -->
    <script>
        function closeAlert() {
            const alertBody = document.getElementById("alert");
            alertBody.classList.add("hidden");
            window.location.href = "https://shop.roovix.com";
        }

        function closeSuccessPopup() {
            const success_popup = document.getElementById("success_popup");
            success_popup.classList.add("hidden");
            window.location.href = "https://shop.roovix.com";
        }
    </script>
    <!-- Function script end -->
  </body>
</html>
